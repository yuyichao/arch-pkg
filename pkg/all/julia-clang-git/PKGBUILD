pkgname=julia-clang-git
pkgver=0.0.0.416.c53e625
pkgrel=1
pkgdesc="Clang.jl"
url="https://github.com/ihnorton/Clang.jl"
arch=('i686' 'x86_64' 'armv7h' 'aarch64')
license=('MIT')
makedepends=('git' 'julia-pkg-scripts')
# TODO version depends
depends=('julia' 'julia-datastructures' 'julia-compat' 'clang')
provides=('julia-clang')
options=('debug' '!strip')
source=(git://github.com/ihnorton/Clang.jl)
md5sums=('SKIP')

pkgver() {
  cd Clang.jl

  echo "0.0.0.$(git rev-list --count master).$(git rev-parse --short master)"
}

build() {
  cd Clang.jl

  julia --startup-file=no deps/build.jl
}

package() {
  cd Clang.jl

  . julia-install-pkg.sh Clang "${pkgdir}" "${pkgname}"
}
